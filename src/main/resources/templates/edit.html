<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Edit banner</title>
    <script type="text/javascript" src="jquery.json-2.4.min.js"></script>
    <script type="text/javascript"
            src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js">
    </script>

    <script type="text/javascript">
        $(document).ready(function()
        {
            //Получаем характеристики выбранного баннера из локальное хранилище
            $.getJSON(//Загружаем JSON - данные с сервера используя AJAX запрос(GET).
                "http://localhost:8080/banners/" + localStorage.getItem("id"),
                function(data)
                {
                        document.getElementById("imgSrc").setAttribute("value", data.imgSrc);
                        document.getElementById("width").setAttribute("value", data.width);
                        document.getElementById("height").setAttribute("value", data.height);
                        document.getElementById("targetUrl").setAttribute("value", data.targetUrl);
                        document.getElementById("langId").setAttribute("value", data.langId);
                })

            $("#editBut").click(function(){
                if (confirm("Редактировать баннер?"))//Если удаление подтверждено
                {
                    //сформируем JSON
                    var JsonData = {
                        "bannerId":localStorage.getItem("id"),
                        "imgSrc":document.getElementById("imgSrc").value,
                        "width":document.getElementById("width").value,
                        "height":document.getElementById("height").value,
                        "targetUrl":document.getElementById("targetUrl").value,
                        "langId":document.getElementById("langId").value
                    };

                    localStorage.clear();//Очищаем локальное хранилище

                    $.ajax({
                        type: "PUT",
                        url: "http://localhost:8080/banners",
                        dataType: "json",
                        contentType : "application/json",
                        data: JSON.stringify(JsonData),//можно передать переменную с json в одном из параметров запроса
                        success: function(res) {//функция выполняется при удачном заверщение
                            alert("Баннер успешно отредактирован!");
                        }
                    });
                }
            });
        });
    </script>
</head>


<body>

<form>
    <fieldset>
        <legend>Характеристики баннера</legend>
        ImgSrc:    <br /><input type='text' id='imgSrc' /><br />
        Width:     <br /><input type='number' id='width' /><br />
        Height:    <br /><input type='number' id='height' /><br />
        TargetUrl: <br /><input type='text' id='targetUrl' /><br />
        LangId:    <br /><input type='text' id='langId' />
    </fieldset>
</form> <br/>
<input id="editBut" type="submit" value="Редактировать" /><br/><br/>
<a href="/">Главная</a>


</body>
</html>