<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>History operation</title>

    <script
            type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js">
    </script>

    <script type="text/javascript">
        $(document).ready(function()//Код который будет выполнен после полной загрузки документа
        {
            $.getJSON(//Загружаем JSON - данные с сервера используя AJAX запрос(GET).
                "http://localhost:8080/bannersChanges",
                function(data)
                {
                    for (var i in data) //Проходим по массиву JSON-объектов
                    {
                        var row = data[i];
                            var y = i;
                            ++y;
                            var x = document.getElementById("tabHistory").insertRow(y);//Добавляем строку в таблицу
                            x.insertCell(0);//Добавляем ячейки
                            x.insertCell(1);
                            x.insertCell(2);
                            x.insertCell(3);
                            x.insertCell(4);
                            x.insertCell(5);
                            //Помещаем в ячейки значения, полученные от сервера
                            document.getElementById("tabHistory").rows[y].cells[0].innerHTML = row.bannerChangeId;
                            document.getElementById("tabHistory").rows[y].cells[1].innerHTML = row.bannerId;
                            document.getElementById("tabHistory").rows[y].cells[2].innerHTML = row.adminName;
                            document.getElementById("tabHistory").rows[y].cells[3].innerHTML = row.typeChange;
                            document.getElementById("tabHistory").rows[y].cells[4].innerHTML = row.descriptionChange;
                            document.getElementById("tabHistory").rows[y].cells[5].innerHTML = row.dateChange;
                    }
                })
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function()
        {
            $("#applyBut").click(function(){
                var bannerId = document.getElementById("bannerId").value;
                var adminName = document.getElementById("adminName").value;

                    //Загружаем JSON - данные с сервера используя AJAX запрос(GET).
                    $.getJSON(
                        "http://localhost:8080/bannersChanges",
                        function(data)
                        {
                            for (var i in data) //Проходим по массиву JSON-объектов
                            {
                                var row = data[i];
                                    var y = i;
                                    ++y;
                                var table = document.getElementById("tabHistory");
                                table.deleteRow(y);
                                var x = table.insertRow(y);//Добавляем строку в таблицу
                                table.rows[y].setAttribute("id", i);
                                    x.insertCell(0);//Добавляем ячейки
                                    x.insertCell(1);
                                    x.insertCell(2);
                                    x.insertCell(3);
                                    x.insertCell(4);
                                    x.insertCell(5);
                                    //Помещаем в ячейки значения, полученные от сервера
                                    table.rows[y].cells[0].innerHTML = row.bannerChangeId;
                                    table.rows[y].cells[1].innerHTML = row.bannerId;
                                    table.rows[y].cells[2].innerHTML = row.adminName;
                                    table.rows[y].cells[3].innerHTML = row.typeChange;
                                    table.rows[y].cells[4].innerHTML = row.descriptionChange;
                                    table.rows[y].cells[5].innerHTML = row.dateChange;
                                    if(row.bannerId!=bannerId&&bannerId!="")
                                    {
                                        $("#"+ i).hide().attr("class", "row");
                                    }
                                   if(row.adminName!=adminName&&adminName!="")
                                   {
                                        $("#"+ i).hide().attr("class", "row");
                                   }
                            }
                        });
            });
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function()
        {
            $("#resetBut").click(function()
            {
                $(".row").show();
            });
        });
    </script>

</head>
<body>

<h2>Операции над баннерами</h2>

<div class="container">
    <table border='1' id="tabHistory" >
        <tr>
            <th><div style="width: 40px;">Id</div></th>
            <th>BannerId</th>
            <th>Admin</th>
            <th>TypeChange</th>
            <th><div style="width: 140px;">DescriptionChange</div></th>
            <th>DateChange</th>
        </tr>
    </table> <br/>
</div>

<form>
    <fieldset>
        <legend>Фильтры:</legend>
        BannerId:    <br /><input type='number' id='bannerId' /><br />
        AdminName:     <br /><input type='text' id='adminName' /><br />
    </fieldset>
</form> <br/>
<input id="applyBut" type="submit" value="Применить" />&nbsp&nbsp&nbsp
<input id="resetBut" type="submit" value="Сбросить" /><br/><br/><br/><br/>

<a href="/">Главная</a>

</body>
</html>